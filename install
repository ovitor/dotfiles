#!/bin/bash

BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
USER=vitor
USER_BASEDIR=/home/$USER/.dotfiles

# pacman 
#bash ${BASEDIR}/pacman/install.sh
#echo "pacman step executed"

# add default user 
# you need to set password later
#useradd -m -G lp,docker,wheel -s /bin/zsh $USER
#echo "add user step executed"

# copying dotfiles and defining BASEDIR
#cp -r $(pwd) $USER_BASEDIR

# gitfiles
ln -sf ${USER_BASEDIR}/gitfiles/gitconfig /home/$USER/.gitconfig
echo "git configuration step executed"

# ntp.br
bash ${USER_BASEDIR}/ntp/install.sh
echo "ntp configuration step executed"

# vimfiles
ln -sf ${USER_BASEDIR}/vim /home/$USER/.vim
vim +PluginInstall +qall
echo "vim configuration step executed"

# config directory
ln -sf ${USER_BASEDIR}/config /home/$USER/.config
echo "configuration step executed"

# local user share applications
mkdir -p /home/$USER/.local/share/
ln -sf ${USER_BASEDIR}/local/share/applications /home/$USER/.local/share/applications
echo "local user share applications configuration step executed"

# archlinux 
bash ${USER_BASEDIR}/archlinux/post-installation.sh $USER
#ln -sf ${USER_BASEDIR}/archlinux/configuration-files/70-synaptics.conf /etc/X11/xorg.conf.d/
#ln -sf ${USER_BASEDIR}/archlinux/configuration-files/10-trackpoint.conf /etc/X11/xorg.conf.d/
#ln -sf ${USER_BASEDIR}/archlinux/configuration-files/20-thinkpad.conf /etc/X11/xorg.conf.d/
#ln -sf ${USER_BASEDIR}/archlinux/configuration-files/thinkpad-x250.conf /etc/modprobe.d/
echo "post installation configuration step executed"

# trizen using other user
#su -u $USER -c 'bash ${BASEDIR}/trizen/install.sh'

# xresources
ln -sf ${USER_BASEDIR}/Xresources /home/$USER/.Xresources
echo "xresources configuration step executed"

# tmux 
ln -sf ${USER_BASEDIR}/tmux.conf /home/$USER/.tmux.conf
echo "tmux configuration step executed"

# zsh - hardcoded user basedir !!! atention !!!
su - $USER -c 'bash /home/vitor/.dotfiles/zshrc/install.sh'
ln -sf ${USER_BASEDIR}/zshrc/zshrc /home/$USER/.zshrc
echo "zsh configuration step executed"

# render unto Caeser the things that are Caesar's
#chown -R $USER:$USER /home/$USER
#echo "owenership configuration step executed"
